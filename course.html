<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" type="text/css" href="course.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript">
		const syllabusList = [];
		var isEditable = 0;
		$(function() {
			$("#form").hide();
		});

		function addSyllabus() {
			$("#form").show();
			let cardNumber = syllabusList.length + 1;
			$("#index1").html("Syllabus " + cardNumber);
		}


		function showCards() {
			$("#cardsDiv").html("");
			let index = 0;
			for (const obj of syllabusList) {
				let card = `<div id="card${index}" class="syllabusCard"><div id="cardBody${index}" class="cardBody"><div id="anchorDiv${index}"><a class="index">Syllabus ${index + 1}</a></div><h2 class="cardTitle">${obj["title"]}</h2><p class="cardDescription">${obj["description"]}</p><ul id="nav${index}" class="actionsNav alignRight"><li class="actionsNav-item"><a id="editbtn" href="javascript:edit(${index})" class="actionsNav-link">Edit</a></li><li class="actionsNav-item"><a href="javascript:deleteSyllabus(${index})" class="actionsNav-link">Delete</a></li></ul></div></div>`;
				$("#cardsDiv").append(card);
				index++;
			}
		}

		function deleteSyllabus(index) {
			let deleteCardId = "#card" + index;
			syllabusList.splice(index, 1);
			showCards();
		}

		function edit(index) {
			let editCardId = "#card" + index;
			// $("#editbtn").prop("disabled", "true");
			let counter = 0;
			for (const obj of syllabusList) {
				if (counter == index) {
					let title = syllabusList[index].title;
					let description = syllabusList[index].description;
					let tags = syllabusList[index].tags;
					let form = `<div id="form" class="container"><div class="formIndex"><a class="index" id="index2"></a></div><label for="syllabusTitle" class="textBoxLabel">Title</label><input type="text" name="syllabusTitle" id="syllabusTitle" class="textBox" value="${obj["title"]}"><br><label for="syllabusDescription" class="textBoxLabel">Description</label><input type="text" name="syllabusDescription" id="syllabusDescription" class="textBox" value="${obj["description"]}"><br><label for="syllabusTags" class="textBoxLabel">Tags</label><input type="text" name="syllabusTags" id="syllabusTags" class="textBox" value="${obj["tags"]}"><br><button id="savebtn" class="alignRight formBtn" onclick="saveData(this)">Save</button><button class="alignRight formBtn" onclick="$(\'#form\').hide(); showCards()">Cancel</button></div>`;
					$(editCardId).replaceWith(form);
					isEditable = 1;
					let cardNumber = index + 1;
					$("#index2").html("Syllabus " + cardNumber);
				}
				counter++;
			}
		}

		function saveData(index) {
			$("#form").hide();
			$("#savebtn").prop("disabled", "true");
			let title = $("#syllabusTitle").val();
			let description = $("#syllabusDescription").val();
			let tags = $("#syllabusTags").val();
			formData = {title:title,description:description,tags:tags};
			if (isEditable == 0) {
				let counter = 0;
				syllabusList.push(formData);
				$("#syllabusTitle").val("");
				$("#syllabusDescription").val("");
				$("#syllabusTags").val("");
			}
			else {
				syllabusList[index] = formData;
			}
			isEditable = 0;
			showCards();
		}
	</script>
</head>
<body>
	<button class="addSyllabus alignRight" id="addSyllabus" onclick="addSyllabus()">Add Syllabus</button>
	<div style="border: 1px solid #fff;" class="container cardContainer" id="cardsDiv"></div>
	<div id="form" class="container">
		<div class="formIndex">
			<a class="index" id="index1">Course 1</a>
		</div>
		<form>
			<label for="syllabusTitle" class="textBoxLabel">Title</label>
			<input type="text" name="syllabusTitle" id="syllabusTitle" class="textBox" onkeyup="if(this.textLength != 0) {savebtn.disabled = false} else {savebtn.disabled = true}" required><br>
			<label for="syllabusDescription" class="textBoxLabel">Description</label>
			<input type="text" name="syllabusDescription" id="syllabusDescription" class="textBox" required><br>
			<label for="syllabusTags" class="textBoxLabel">Tags</label>
			<input type="text" name="syllabusTags" id="syllabusTags" class="textBox" required><br>
			<button id="savebtn" class="alignRight formBtn" onclick="saveData()" disabled>Save</button>
			<button class="alignRight formBtn" onclick='$("#form").hide()'>Cancel</button>
		</form>
	</div>
</body>
</html>